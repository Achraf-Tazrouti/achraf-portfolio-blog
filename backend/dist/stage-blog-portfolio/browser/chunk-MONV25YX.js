import{a as u}from"./chunk-IZ2WQRHP.js";import{D as l,eb as h,gb as d,l as e,o as p,r as g}from"./chunk-U6KS7BBN.js";var m=class n{constructor(t){this.http=t}apiUrl=`${u.apiBaseUrl}/posts`;postsSignal=l([]);posts=this.postsSignal.asReadonly();loadPosts(){return this.http.get(this.apiUrl).pipe(e(t=>this.postsSignal.set(t)))}getPostById(t){return this.posts().find(s=>s._id===t)}createPost(t,s,r,i,a,o,c){return this.http.post(this.apiUrl,{title:t,content:s,focus:i,goal:a,status:o,skills:c},{headers:this.authHeaders(r)}).pipe(e(f=>this.postsSignal.update(P=>[f,...P])))}deletePost(t,s){return this.http.delete(`${this.apiUrl}/${t}`,{headers:this.authHeaders(s)}).pipe(e(()=>this.postsSignal.update(r=>r.filter(i=>i._id!==t))))}updatePost(t,s,r){return this.http.put(`${this.apiUrl}/${t}`,s,{headers:this.authHeaders(r)}).pipe(e(i=>this.postsSignal.update(a=>a.map(o=>o._id===i._id?i:o))))}authHeaders(t){return new h({Authorization:`Bearer ${t}`})}static \u0275fac=function(s){return new(s||n)(g(d))};static \u0275prov=p({token:n,factory:n.\u0275fac,providedIn:"root"})};export{m as a};
